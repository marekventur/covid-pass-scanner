(this.webpackJsonpcovidscan=this.webpackJsonpcovidscan||[]).push([[0],{121:function(e){e.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://id.uvci.eu/DCC.combined-schema.json","title":"EU DCC","description":"EU Digital Covid Certificate","$comment":"Schema version 1.3.0","type":"object","oneOf":[{"required":["ver","nam","dob","v"]},{"required":["ver","nam","dob","t"]},{"required":["ver","nam","dob","r"]}],"properties":{"ver":{"title":"Schema version","description":"Version of the schema, according to Semantic versioning (ISO, https://semver.org/ version 2.0.0 or newer)","type":"string","pattern":"^\\\\d+.\\\\d+.\\\\d+$","examples":["1.3.0"]},"nam":{"description":"Surname(s), forename(s) - in that order","$ref":"#/$defs/person_name"},"dob":{"title":"Date of birth","description":"Date of Birth of the person addressed in the DCC. ISO 8601 date format restricted to range 1900-2099 or empty","type":"string","pattern":"^((19|20)\\\\d\\\\d(-\\\\d\\\\d){0,2}){0,1}$","examples":["1979-04-14","1950","1901-08",""]},"v":{"description":"Vaccination Group","type":"array","items":{"$ref":"#/$defs/vaccination_entry"},"minItems":1,"maxItems":1},"t":{"description":"Test Group","type":"array","items":{"$ref":"#/$defs/test_entry"},"minItems":1,"maxItems":1},"r":{"description":"Recovery Group","type":"array","items":{"$ref":"#/$defs/recovery_entry"},"minItems":1,"maxItems":1}},"$defs":{"dose_posint":{"description":"Dose Number / Total doses in Series: positive integer","type":"integer","minimum":1},"issuer":{"description":"Certificate Issuer","type":"string","maxLength":80},"person_name":{"description":"Person name: Surname(s), forename(s) - in that order","required":["fnt"],"type":"object","properties":{"fn":{"title":"Surname","description":"The surname or primary name(s) of the person addressed in the certificate","type":"string","maxLength":80,"examples":["d\'\u010cervenkov\xe1 Panklov\xe1"]},"fnt":{"title":"Standardised surname","description":"The surname(s) of the person, transliterated ICAO 9303","type":"string","pattern":"^[A-Z<]*$","maxLength":80,"examples":["DCERVENKOVA<PANKLOVA"]},"gn":{"title":"Forename","description":"The forename(s) of the person addressed in the certificate","type":"string","maxLength":80,"examples":["Ji\u0159ina-Maria Alena"]},"gnt":{"title":"Standardised forename","description":"The forename(s) of the person, transliterated ICAO 9303","type":"string","pattern":"^[A-Z<]*$","maxLength":80,"examples":["JIRINA<MARIA<ALENA"]}}},"certificate_id":{"description":"Certificate Identifier, format as per UVCI: Annex 2 in  https://ec.europa.eu/health/sites/health/files/ehealth/docs/vaccination-proof_interoperability-guidelines_en.pdf","type":"string","maxLength":80},"vaccination_entry":{"description":"Vaccination Entry","required":["tg","vp","mp","ma","dn","sd","dt","co","is","ci"],"type":"object","properties":{"tg":{"description":"disease or agent targeted","$ref":"#/$defs/disease-agent-targeted"},"vp":{"description":"vaccine or prophylaxis","$ref":"#/$defs/vaccine-prophylaxis"},"mp":{"description":"vaccine medicinal product","$ref":"#/$defs/vaccine-medicinal-product"},"ma":{"description":"Marketing Authorization Holder - if no MAH present, then manufacturer","$ref":"#/$defs/vaccine-mah-manf"},"dn":{"description":"Dose Number","$ref":"#/$defs/dose_posint"},"sd":{"description":"Total Series of Doses","$ref":"#/$defs/dose_posint"},"dt":{"description":"ISO8601 complete date: Date of Vaccination","type":"string","format":"date"},"co":{"description":"Country of Vaccination","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"ci":{"description":"Unique Certificate Identifier: UVCI","$ref":"#/$defs/certificate_id"}}},"test_entry":{"description":"Test Entry","required":["tg","tt","sc","tr","co","is","ci"],"type":"object","properties":{"tg":{"$ref":"#/$defs/disease-agent-targeted"},"tt":{"description":"Type of Test","$ref":"#/$defs/test-type"},"nm":{"description":"NAA Test Name","type":"string","maxLength":80},"ma":{"description":"RAT Test name and manufacturer","$ref":"#/$defs/test-manf"},"sc":{"description":"Date/Time of Sample Collection","type":"string","format":"date-time"},"tr":{"description":"Test Result","$ref":"#/$defs/test-result"},"tc":{"description":"Testing Centre","type":"string","maxLength":80},"co":{"description":"Country of Test","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"ci":{"description":"Unique Certificate Identifier, UVCI","$ref":"#/$defs/certificate_id"}}},"recovery_entry":{"description":"Recovery Entry","required":["tg","fr","co","is","df","du","ci"],"type":"object","properties":{"tg":{"$ref":"#/$defs/disease-agent-targeted"},"fr":{"description":"ISO 8601 complete date of first positive NAA test result","type":"string","format":"date"},"co":{"description":"Country of Test","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"df":{"description":"ISO 8601 complete date: Certificate Valid From","type":"string","format":"date"},"du":{"description":"ISO 8601 complete date: Certificate Valid Until","type":"string","format":"date"},"ci":{"description":"Unique Certificate Identifier, UVCI","$ref":"#/$defs/certificate_id"}}},"disease-agent-targeted":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.1","type":"string","valueset-uri":"valuesets/disease-agent-targeted.json"},"vaccine-prophylaxis":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.2","type":"string","valueset-uri":"valuesets/vaccine-prophylaxis.json"},"vaccine-medicinal-product":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.3","type":"string","valueset-uri":"valuesets/vaccine-medicinal-product.json"},"vaccine-mah-manf":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.4","type":"string","valueset-uri":"valuesets/vaccine-mah-manf.json"},"country_vt":{"description":"Country of Vaccination / Test, ISO 3166 alpha-2 where possible","type":"string","pattern":"[A-Z]{1,10}","valueset-uri":"valuesets/country-2-codes.json"},"test-manf":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.8","type":"string","valueset-uri":"valuesets/test-manf.json"},"test-result":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.9","type":"string","valueset-uri":"valuesets/test-result.json"},"test-type":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.7","type":"string","valueset-uri":"valuesets/test-type.json"}}}')},172:function(e,t,i){},173:function(e,t,i){},174:function(e,t,i){},206:function(e,t,i){},207:function(e,t,i){"use strict";i.r(t);var r=i(28),n=i.n(r),s=i(163),o=i.n(s),a=(i(172),i(38)),c=(i(173),i(174),i(113)),d=i(167),u=i(164),l=i.n(u),f=i(165),p=i.n(f),v=i(120),m=i(121),h=i(7),j=function(e){return m.$defs[e.split("/")[2]].properties},b=function e(t){var i={};return t.forEach((function(t,r){t instanceof Array?i[r]=t.map(e):t instanceof Map?i[r]=e(t):i[r]=t})),i},g=function e(t,i){var r={};return t.forEach((function(t,n){var s,o=i[n];if(o){var a=null!==(s=o.title)&&void 0!==s?s:o.description;if(t instanceof Array){var c=j(o.items.$ref);r[a]=t.map((function(t){return e(t,c)}))}else t instanceof Map?r[a]=e(t,j(o.$ref)):r[a]=t}else r[n]=t})),r},y=function(e){var t=e.data,i=Object(r.useMemo)((function(){return function(e){if(!e)return null;try{var t=e.slice(4),i=l.a.decode(t),r=p.a.inflate(i),n=Object(v.decode)(r,{tags:{18:function(e){return e}}}),s=Object(a.a)(n,4),o=(s[0],s[1],s[2]),c=(s[3],Object(v.decode)(o,{useMaps:!0})),d=c.get(-260).get(1);return{code:{issuer:c.get(1),expiry:new Date(1e3*c.get(4)),generated:new Date(1e3*c.get(6))},humanReadable:g(d,m.properties),data:b(d)}}catch(u){return console.error(u),new Error(u)}}(t)}),[t]),n=function(e,t){var i=Object(r.useRef)(null),n=Object(r.useState)(!1),s=Object(a.a)(n,2),o=s[0],c=s[1],d=JSON.stringify(e);return Object(r.useEffect)((function(){if(d!==i.current){i.current=d,c(!0);var e=setTimeout((function(){return c(!1)}),t);return function(){return clearTimeout(e)}}return function(){}}),[d,t]),o}(null===i||void 0===i?void 0:i.data,1e3);return i?Object(h.jsx)("div",{className:"result ".concat(n?"result--has-changed":""),children:i instanceof Error?Object(h.jsx)(x,{error:i}):Object(h.jsx)(O,Object(d.a)({},i))}):null},O=function(e){var t,i,n,s,o,c,d,u,l=e.data,f=e.humanReadable,p=e.code,v=Object(r.useState)(!1),m=Object(a.a)(v,2),j=m[0],b=m[1],g=null===(t=l.v)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.dn,y=null===(n=l.v)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.sd,O=new Date(null===(o=l.v)||void 0===o||null===(c=o[0])||void 0===c?void 0:c.dt),x=Math.floor((Date.now()-O)/1e3/60/60/24),C=Date.now()<p.expiry,$=g===y&&x>14;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{className:"show-details",onClick:function(){return b(!j)},children:j?"Less details":"More details"}),!j&&Object(h.jsxs)("dl",{children:[Object(h.jsx)("dt",{children:"Name"}),Object(h.jsxs)("dd",{children:[null===(d=l.nam)||void 0===d?void 0:d.gn," ",null===(u=l.nam)||void 0===u?void 0:u.fn]}),Object(h.jsx)("dt",{children:"DoB"}),Object(h.jsx)("dd",{children:l.dob}),Object(h.jsx)("dt",{children:"Vaccine"}),Object(h.jsxs)("dd",{className:$?"key--ok":"key--bad",children:[g," / ",y," (",x," days ago)"]}),Object(h.jsx)("dt",{children:"Country"}),Object(h.jsx)("dd",{children:p.issuer}),Object(h.jsx)("dt",{children:"Code expiration"}),Object(h.jsx)("dd",{className:C?"key--ok":"key--bad",children:p.expiry.toISOString().slice(0,10)})]}),j&&Object(h.jsx)("pre",{className:"details",children:JSON.stringify(f,null,2)})]})},x=function(){return Object(h.jsx)("div",{className:"error",children:"Invalid code"})},C=i(122),$=i(123);i(206);function S(e){var t=e.children,i=e.onValue,n=Object(r.useState)(!1),s=Object(a.a)(n,2),o=s[0],c=s[1],d=Object(r.useState)(""),u=Object(a.a)(d,2),l=u[0],f=u[1],p=Object(r.useRef)(),v=function(){var e;l&&i(l),c(!1),f(""),null===(e=p.current)||void 0===e||e.blur()};return Object(h.jsxs)("div",{className:"input-button ".concat(o?"input-button--visible":""),children:[Object(h.jsx)("input",{ref:p,value:l,onChange:function(e){var t=e.target;return f(t.value)},onBlur:v,onKeyPress:function(e){13===e.charCode&&v()},placeholder:"HC1:6BFOXN+TSMAHN-HO.PG:MCU62$"}),Object(h.jsx)("button",{onClick:function(){!o&&p.current&&(p.current.focus(),c(!0))},children:t})]})}function N(e){var t=e.children,i=e.onValue,n=Object(r.useRef)();return Object(h.jsxs)("div",{className:"input-button",children:[Object(h.jsx)("input",{className:"upload-file-button",type:"file",ref:n,onChange:function(e){var t=n.current.files[0];if(t){var r=new FileReader;r.readAsDataURL(t),r.onload=function(e){i(r.result)},r.onerror=console.error}}}),Object(h.jsx)("button",{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},children:t})]})}var I=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),i=t[0],n=t[1],s=Object(r.useState)(null),o=Object(a.a)(s,2),d=o[0],u=o[1],l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onError,i=void 0===t?console.error:t,n=e.onData,s=Object(r.useState)(null),o=Object(a.a)(s,2),d=o[0],u=o[1];return Object(r.useEffect)((function(){if(d)try{var e=void 0;return(new c.BrowserQRCodeReader).decodeFromConstraints({video:{facingMode:"environment"}},d,(function(e,t,i){e&&n(e.text)})).then((function(t){return e=t})),function(){var t;return null===(t=e)||void 0===t?void 0:t.stop()}}catch(t){i(t)}}),[d,i,n]),{previewRef:u}}({onData:u}).previewRef;return Object(h.jsxs)("div",{className:"app",children:[Object(h.jsxs)("header",{children:[Object(h.jsxs)("section",{className:"bar",children:[Object(h.jsx)("h1",{children:"Covid Pass Scanner"}),Object(h.jsxs)("p",{children:["Hold code in middle of viewport."," ",Object(h.jsx)("button",{onClick:function(){return n(!i)},children:"Learn more..."})]}),Object(h.jsx)("p",{className:"show-more ".concat(i?"show-more--expanded":""),children:"This app acts as a QR code scanner for EU vaccination passports and displays the results below. You can use this to verify the validity of a given vaccine passport."})]}),Object(h.jsxs)("section",{className:"actions",children:[Object(h.jsx)(S,{onValue:u,children:Object(h.jsx)(C.a,{icon:$.a,title:"Open text input"})}),Object(h.jsx)(N,{onValue:function(e){(new c.BrowserQRCodeReader).decodeFromImageUrl(e).then((function(e){return u(null===e||void 0===e?void 0:e.text)}))},children:Object(h.jsx)(C.a,{icon:$.b,title:"Upload image"})})]})]}),Object(h.jsx)(y,{data:d}),Object(h.jsx)("div",{className:"viewport",children:Object(h.jsx)("video",{ref:l})})]})},w=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,208)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;i(e),r(e),n(e),s(e),o(e)}))};o.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(I,{})}),document.getElementById("root")),w()}},[[207,1,2]]]);
//# sourceMappingURL=main.1e9365a8.chunk.js.map