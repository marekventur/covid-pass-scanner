(this.webpackJsonpcovidscan=this.webpackJsonpcovidscan||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://id.uvci.eu/DCC.combined-schema.json","title":"EU DCC","description":"EU Digital Covid Certificate","$comment":"Schema version 1.3.0","type":"object","oneOf":[{"required":["ver","nam","dob","v"]},{"required":["ver","nam","dob","t"]},{"required":["ver","nam","dob","r"]}],"properties":{"ver":{"title":"Schema version","description":"Version of the schema, according to Semantic versioning (ISO, https://semver.org/ version 2.0.0 or newer)","type":"string","pattern":"^\\\\d+.\\\\d+.\\\\d+$","examples":["1.3.0"]},"nam":{"description":"Surname(s), forename(s) - in that order","$ref":"#/$defs/person_name"},"dob":{"title":"Date of birth","description":"Date of Birth of the person addressed in the DCC. ISO 8601 date format restricted to range 1900-2099 or empty","type":"string","pattern":"^((19|20)\\\\d\\\\d(-\\\\d\\\\d){0,2}){0,1}$","examples":["1979-04-14","1950","1901-08",""]},"v":{"description":"Vaccination Group","type":"array","items":{"$ref":"#/$defs/vaccination_entry"},"minItems":1,"maxItems":1},"t":{"description":"Test Group","type":"array","items":{"$ref":"#/$defs/test_entry"},"minItems":1,"maxItems":1},"r":{"description":"Recovery Group","type":"array","items":{"$ref":"#/$defs/recovery_entry"},"minItems":1,"maxItems":1}},"$defs":{"dose_posint":{"description":"Dose Number / Total doses in Series: positive integer","type":"integer","minimum":1},"issuer":{"description":"Certificate Issuer","type":"string","maxLength":80},"person_name":{"description":"Person name: Surname(s), forename(s) - in that order","required":["fnt"],"type":"object","properties":{"fn":{"title":"Surname","description":"The surname or primary name(s) of the person addressed in the certificate","type":"string","maxLength":80,"examples":["d\'\u010cervenkov\xe1 Panklov\xe1"]},"fnt":{"title":"Standardised surname","description":"The surname(s) of the person, transliterated ICAO 9303","type":"string","pattern":"^[A-Z<]*$","maxLength":80,"examples":["DCERVENKOVA<PANKLOVA"]},"gn":{"title":"Forename","description":"The forename(s) of the person addressed in the certificate","type":"string","maxLength":80,"examples":["Ji\u0159ina-Maria Alena"]},"gnt":{"title":"Standardised forename","description":"The forename(s) of the person, transliterated ICAO 9303","type":"string","pattern":"^[A-Z<]*$","maxLength":80,"examples":["JIRINA<MARIA<ALENA"]}}},"certificate_id":{"description":"Certificate Identifier, format as per UVCI: Annex 2 in  https://ec.europa.eu/health/sites/health/files/ehealth/docs/vaccination-proof_interoperability-guidelines_en.pdf","type":"string","maxLength":80},"vaccination_entry":{"description":"Vaccination Entry","required":["tg","vp","mp","ma","dn","sd","dt","co","is","ci"],"type":"object","properties":{"tg":{"description":"disease or agent targeted","$ref":"#/$defs/disease-agent-targeted"},"vp":{"description":"vaccine or prophylaxis","$ref":"#/$defs/vaccine-prophylaxis"},"mp":{"description":"vaccine medicinal product","$ref":"#/$defs/vaccine-medicinal-product"},"ma":{"description":"Marketing Authorization Holder - if no MAH present, then manufacturer","$ref":"#/$defs/vaccine-mah-manf"},"dn":{"description":"Dose Number","$ref":"#/$defs/dose_posint"},"sd":{"description":"Total Series of Doses","$ref":"#/$defs/dose_posint"},"dt":{"description":"ISO8601 complete date: Date of Vaccination","type":"string","format":"date"},"co":{"description":"Country of Vaccination","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"ci":{"description":"Unique Certificate Identifier: UVCI","$ref":"#/$defs/certificate_id"}}},"test_entry":{"description":"Test Entry","required":["tg","tt","sc","tr","co","is","ci"],"type":"object","properties":{"tg":{"$ref":"#/$defs/disease-agent-targeted"},"tt":{"description":"Type of Test","$ref":"#/$defs/test-type"},"nm":{"description":"NAA Test Name","type":"string","maxLength":80},"ma":{"description":"RAT Test name and manufacturer","$ref":"#/$defs/test-manf"},"sc":{"description":"Date/Time of Sample Collection","type":"string","format":"date-time"},"tr":{"description":"Test Result","$ref":"#/$defs/test-result"},"tc":{"description":"Testing Centre","type":"string","maxLength":80},"co":{"description":"Country of Test","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"ci":{"description":"Unique Certificate Identifier, UVCI","$ref":"#/$defs/certificate_id"}}},"recovery_entry":{"description":"Recovery Entry","required":["tg","fr","co","is","df","du","ci"],"type":"object","properties":{"tg":{"$ref":"#/$defs/disease-agent-targeted"},"fr":{"description":"ISO 8601 complete date of first positive NAA test result","type":"string","format":"date"},"co":{"description":"Country of Test","$ref":"#/$defs/country_vt"},"is":{"description":"Certificate Issuer","$ref":"#/$defs/issuer"},"df":{"description":"ISO 8601 complete date: Certificate Valid From","type":"string","format":"date"},"du":{"description":"ISO 8601 complete date: Certificate Valid Until","type":"string","format":"date"},"ci":{"description":"Unique Certificate Identifier, UVCI","$ref":"#/$defs/certificate_id"}}},"disease-agent-targeted":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.1","type":"string","valueset-uri":"valuesets/disease-agent-targeted.json"},"vaccine-prophylaxis":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.2","type":"string","valueset-uri":"valuesets/vaccine-prophylaxis.json"},"vaccine-medicinal-product":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.3","type":"string","valueset-uri":"valuesets/vaccine-medicinal-product.json"},"vaccine-mah-manf":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.4","type":"string","valueset-uri":"valuesets/vaccine-mah-manf.json"},"country_vt":{"description":"Country of Vaccination / Test, ISO 3166 alpha-2 where possible","type":"string","pattern":"[A-Z]{1,10}","valueset-uri":"valuesets/country-2-codes.json"},"test-manf":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.8","type":"string","valueset-uri":"valuesets/test-manf.json"},"test-result":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.9","type":"string","valueset-uri":"valuesets/test-result.json"},"test-type":{"description":"EU eHealthNetwork: Value Sets for Digital Covid Certificates. version 1.0, 2021-04-16, section 2.7","type":"string","valueset-uri":"valuesets/test-type.json"}}}')},38:function(e,t,i){},39:function(e,t,i){},40:function(e,t,i){},68:function(e,t,i){"use strict";i.r(t);var r=i(1),n=i.n(r),s=i(30),a=i.n(s),o=(i(38),i(6));i(39),i(40);var c=i(33),d=i(31),p=i.n(d),f=i(32),u=i.n(f),l=i(14),m=i(15),v=i(0),h=function(e){return m.$defs[e.split("/")[2]].properties},g=function e(t){var i={};return t.forEach((function(t,r){t instanceof Array?i[r]=t.map(e):t instanceof Map?i[r]=e(t):i[r]=t})),i},j=function e(t,i){var r={};return t.forEach((function(t,n){var s,a=i[n];if(a){var o=null!==(s=a.title)&&void 0!==s?s:a.description;if(t instanceof Array){var c=h(a.items.$ref);r[o]=t.map((function(t){return e(t,c)}))}else t instanceof Map?r[o]=e(t,h(a.$ref)):r[o]=t}else r[n]=t})),r},y=function(e){if(!e)return null;try{var t=e.slice(4),i=p.a.decode(t),r=u.a.inflate(i),n=Object(l.decode)(r,{tags:{18:function(e){return e}}}),s=Object(o.a)(n,4),a=(s[0],s[1],s[2]),c=(s[3],Object(l.decode)(a,{useMaps:!0})),d=c.get(-260).get(1);return{code:{issuer:c.get(1),expiry:new Date(1e3*c.get(4)),generated:new Date(1e3*c.get(6))},humanReadable:j(d,m.properties),data:g(d)}}catch(f){return console.error(f),f}},b=function(e){var t=e.data,i=Object(r.useMemo)((function(){return y(t)}),[t]),n=function(e,t){var i=Object(r.useRef)(null),n=Object(r.useState)(!1),s=Object(o.a)(n,2),a=s[0],c=s[1],d=JSON.stringify(e);return console.log(d),Object(r.useEffect)((function(){if(console.log(d,i),d!==i.current){i.current=d,c(!0);var e=setTimeout((function(){return c(!1)}),t);return function(){return clearTimeout(e)}}return function(){}}),[d,t]),a}(null===i||void 0===i?void 0:i.data,1e3);return i?Object(v.jsx)("div",{className:"result ".concat(n?"result--has-changed":""),children:y instanceof Error?Object(v.jsx)($,{error:i}):Object(v.jsx)(O,Object(c.a)({},i))}):null},O=function(e){var t,i,n,s,a,c,d,p,f=e.data,u=e.humanReadable,l=e.code,m=Object(r.useState)(!1),h=Object(o.a)(m,2),g=h[0],j=h[1],y=null===(t=f.v)||void 0===t||null===(i=t[0])||void 0===i?void 0:i.dn,b=null===(n=f.v)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.sd,O=new Date(null===(a=f.v)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.dt),$=Math.floor((Date.now()-O)/1e3/60/60/24),x=Date.now()<l.expiry,C=y===b&&$>14;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("button",{className:"show-details",onClick:function(){return j(!g)},children:g?"Less details":"More details"}),!g&&Object(v.jsxs)("dl",{children:[Object(v.jsx)("dt",{children:"Name"}),Object(v.jsxs)("dd",{children:[null===(d=f.nam)||void 0===d?void 0:d.gn," ",null===(p=f.nam)||void 0===p?void 0:p.fn]}),Object(v.jsx)("dt",{children:"DoB"}),Object(v.jsx)("dd",{children:f.dob}),Object(v.jsx)("dt",{children:"Vaccine"}),Object(v.jsxs)("dd",{className:C?"key--ok":"key--bad",children:[y," / ",b," (",$," days ago)"]}),Object(v.jsx)("dt",{children:"Country"}),Object(v.jsx)("dd",{children:l.issuer}),Object(v.jsx)("dt",{children:"Code expiration"}),Object(v.jsx)("dd",{className:x?"key--ok":"key--bad",children:l.expiry.toISOString().slice(0,10)})]}),g&&Object(v.jsx)("pre",{className:"details",children:JSON.stringify(u,null,2)})]})},$=function(){return Object(v.jsx)("div",{className:"error",children:"Invalid vaccination code"})};var x=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),i=t[0],s=t[1],a=function(e){var t=e.id,i=Object(r.useState)(null),s=Object(o.a)(i,2),a=s[0],c=s[1],d=n.a.useRef(null);return Object(r.useEffect)((function(){try{c(null);var e=new Html5Qrcode(t);return d.current=e,e.start({facingMode:"environment"},{formatsToSupport:[0]},(function(e){c(e)}),(function(e){})).catch(console.error),function(){return e.stop()}}catch(i){console.error(i)}}),[t]),{data:a}}({id:"viewport-scanner"}).data;return Object(v.jsxs)("div",{className:"app",children:[Object(v.jsxs)("header",{children:[Object(v.jsx)("h1",{children:"Covid Pass Scanner"}),Object(v.jsxs)("p",{children:["Hold code in middle of viewport."," ",Object(v.jsx)("button",{onClick:function(){return s(!i)},children:"Learn more..."})]}),Object(v.jsx)("p",{className:"show-more ".concat(i?"show-more--expanded":""),children:"This app acts as a QR code scanner for EU vaccination passports and displays the results below. You can use this to verify the validity of a given vaccine passport."})]}),Object(v.jsx)(b,{data:a}),Object(v.jsx)("div",{className:"viewport",children:Object(v.jsx)("div",{id:"viewport-scanner"})})]})},C=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,69)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,a=t.getTTFB;i(e),r(e),n(e),s(e),a(e)}))};a.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(x,{})}),document.getElementById("root")),C()}},[[68,1,2]]]);
//# sourceMappingURL=main.6905f4bd.chunk.js.map